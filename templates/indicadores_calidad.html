{% extends "base.html" %}

{% block title %}Indicadores de Calidad - MedCheck{% endblock %}

{% block content %}
<div class="container mt-4">
    <!-- Header -->
    <div class="row mb-4">
        <div class="col-12">
            <h1 class="text-primary">
                <i class="fas fa-chart-line"></i> Indicadores de Calidad en Salud
            </h1>
            <hr>
        </div>
    </div>

    <!-- Objetivos y Competencias -->
    <div class="row mb-4">
        <div class="col-md-6">
            <div class="card border-primary">
                <div class="card-header bg-primary text-white">
                    <h5><i class="fas fa-bullseye"></i> Objetivos</h5>
                </div>
                <div class="card-body">
                    <ol>
                        <li><strong>Comprender</strong> el papel de los indicadores de calidad como herramientas para medir y mejorar la atención en salud</li>
                        <li><strong>Aplicar</strong> el pensamiento crítico para interpretar y utilizar indicadores en casos clínicos reales y simulados</li>
                        <li><strong>Proponer</strong> mejoras basadas en los resultados de indicadores</li>
                    </ol>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card border-success">
                <div class="card-header bg-success text-white">
                    <h5><i class="fas fa-graduation-cap"></i> Competencias Específicas</h5>
                </div>
                <div class="card-body">
                    <ul class="list-unstyled">
                        <li><i class="fas fa-check text-success"></i> Distinguir los distintos tipos de indicadores de calidad</li>
                        <li><i class="fas fa-check text-success"></i> Conocer las fuentes de información para obtención y análisis</li>
                        <li><i class="fas fa-check text-success"></i> Interpretar datos e informes de indicadores clave</li>
                        <li><i class="fas fa-check text-success"></i> Relacionar resultados con acciones de mejora continua</li>
                        <li><i class="fas fa-check text-success"></i> Evaluar cumplimiento de estándares de calidad</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Los 10 Correctos -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card border-info">
                <div class="card-header bg-info text-white">
                    <h4><i class="fas fa-pills"></i> Los 10 Correctos para la Administración de Medicamentos</h4>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="list-group mb-3">
                                <div class="list-group-item">
                                    <h6 class="mb-1"><i class="fas fa-user text-primary"></i> 1. Paciente Correcto</h6>
                                    <p class="mb-1 small">Verificación de identidad con dos identificadores únicos</p>
                                </div>
                                <div class="list-group-item">
                                    <h6 class="mb-1"><i class="fas fa-capsules text-primary"></i> 2. Medicamento Correcto</h6>
                                    <p class="mb-1 small">Verificar nombre genérico y comercial contra orden médica</p>
                                </div>
                                <div class="list-group-item">
                                    <h6 class="mb-1"><i class="fas fa-weight text-primary"></i> 3. Dosis Correcta</h6>
                                    <p class="mb-1 small">Validar cantidad exacta prescrita y unidades de medida</p>
                                </div>
                                <div class="list-group-item">
                                    <h6 class="mb-1"><i class="fas fa-syringe text-primary"></i> 4. Vía de Administración Correcta</h6>
                                    <p class="mb-1 small">Confirmar ruta prescrita (oral, IV, IM, SC, etc.)</p>
                                </div>
                                <div class="list-group-item">
                                    <h6 class="mb-1"><i class="fas fa-clock text-primary"></i> 5. Hora de Administración Correcta</h6>
                                    <p class="mb-1 small">Respetar intervalos y horarios establecidos</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="list-group mb-3">
                                <div class="list-group-item">
                                    <h6 class="mb-1"><i class="fas fa-calendar-check text-primary"></i> 6. Fecha de Vencimiento Correcta</h6>
                                    <p class="mb-1 small">Verificar que el medicamento no esté caducado</p>
                                </div>
                                <div class="list-group-item">
                                    <h6 class="mb-1"><i class="fas fa-chalkboard-teacher text-primary"></i> 7. Educación al Paciente</h6>
                                    <p class="mb-1 small">Informar sobre el medicamento y su propósito</p>
                                </div>
                                <div class="list-group-item">
                                    <h6 class="mb-1"><i class="fas fa-file-medical text-primary"></i> 8. Registro Correcto</h6>
                                    <p class="mb-1 small">Documentar administración inmediatamente</p>
                                </div>
                                <div class="list-group-item">
                                    <h6 class="mb-1"><i class="fas fa-exclamation-triangle text-warning"></i> 9. Verificación de Alergias</h6>
                                    <p class="mb-1 small">Indagar historial de alergias medicamentosas</p>
                                </div>
                                <div class="list-group-item">
                                    <h6 class="mb-1"><i class="fas fa-user-shield text-primary"></i> 10. Responsabilidad Personal</h6>
                                    <p class="mb-1 small">Preparar, administrar y registrar personalmente</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Fichas Técnicas -->
    <div class="row mb-4">
        <div class="col-12">
            <h3 class="text-primary"><i class="fas fa-clipboard-list"></i> Fichas Técnicas de Indicadores</h3>
            <hr>
        </div>
    </div>

    <!-- Indicador de Proceso -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card border-warning">
                <div class="card-header bg-warning text-dark">
                    <h5><i class="fas fa-tasks"></i> Indicador de Proceso: CLMC</h5>
                    <small>Cumplimiento del Uso de la Lista de Cotejo Digital "MedCheck"</small>
                </div>
                <div class="card-body">
                    <table class="table table-bordered table-sm">
                        <tbody>
                            <tr>
                                <th width="25%" class="bg-light">Tipo de Indicador</th>
                                <td><span class="badge bg-warning text-dark">Proceso</span> - Agrupación de datos - Positivo</td>
                            </tr>
                            <tr>
                                <th class="bg-light">Propósito</th>
                                <td>Evaluar el cumplimiento del uso del checklist digital MedCheck previo a cada administración de medicamentos para reducir errores de medicación</td>
                            </tr>
                            <tr>
                                <th class="bg-light">Fórmula de Cálculo</th>
                                <td>
                                    <code>CLMC (%) = (Formatos MedCheck Completos / Total de Administraciones) × 100</code>
                                </td>
                            </tr>
                            <tr>
                                <th class="bg-light">Meta</th>
                                <td><strong>≥ 90%</strong> de cumplimiento mensual</td>
                            </tr>
                            <tr>
                                <th class="bg-light">Umbrales</th>
                                <td>
                                    <span class="badge bg-success">90-100%: Calidad Óptima</span>
                                    <span class="badge bg-warning text-dark">80-89%: Zona de Alerta</span>
                                    <span class="badge bg-danger">&lt;80%: Fuera de Control</span>
                                </td>
                            </tr>
                            <tr>
                                <th class="bg-light">Frecuencia</th>
                                <td>Mensual con revisiones semanales</td>
                            </tr>
                            <tr>
                                <th class="bg-light">Fuente de Datos</th>
                                <td>Sistema MedCheck - Lista de cotejo digital integrada</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Indicador de Resultado -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card border-danger">
                <div class="card-header bg-danger text-white">
                    <h5><i class="fas fa-heartbeat"></i> Indicador de Resultado: TEAEM</h5>
                    <small>Tasa de Eventos Adversos por Errores de Medicación</small>
                </div>
                <div class="card-body">
                    <table class="table table-bordered table-sm">
                        <tbody>
                            <tr>
                                <th width="25%" class="bg-light">Tipo de Indicador</th>
                                <td><span class="badge bg-danger">Resultado</span> - Agrupación de datos - Negativo (menor es mejor)</td>
                            </tr>
                            <tr>
                                <th class="bg-light">Propósito</th>
                                <td>Medir la incidencia de eventos adversos relacionados con errores en la administración de medicamentos donde se documentó incumplimiento de uno o más de los 10 correctos</td>
                            </tr>
                            <tr>
                                <th class="bg-light">Fórmula de Cálculo</th>
                                <td>
                                    <code>TEAEM (%) = (Eventos con Incumplimiento ≥1 Correcto / Total de Administraciones) × 100</code>
                                </td>
                            </tr>
                            <tr>
                                <th class="bg-light">Meta</th>
                                <td><strong>≤ 2%</strong> de eventos adversos por error de medicación</td>
                            </tr>
                            <tr>
                                <th class="bg-light">Umbrales</th>
                                <td>
                                    <span class="badge bg-success">0-2%: Excelencia</span>
                                    <span class="badge bg-warning text-dark">2.1-5%: Aceptable con Vigilancia</span>
                                    <span class="badge bg-danger">&gt;5%: Inaceptable</span>
                                </td>
                            </tr>
                            <tr>
                                <th class="bg-light">Frecuencia</th>
                                <td>Mensual con revisiones semanales</td>
                            </tr>
                            <tr>
                                <th class="bg-light">Fuentes de Datos</th>
                                <td>Sistema MedCheck + Farmacovigilancia + Expediente Clínico Electrónico</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Matriz de Riesgos -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card border-dark">
                <div class="card-header bg-dark text-white">
                    <h5><i class="fas fa-shield-alt"></i> Matriz de Riesgos y Toma de Decisiones</h5>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-bordered table-sm table-hover">
                            <thead class="table-dark">
                                <tr>
                                    <th>Riesgo Identificado</th>
                                    <th>Probabilidad</th>
                                    <th>Impacto</th>
                                    <th>Nivel</th>
                                    <th>Estrategia de Mitigación</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Error en identificación del paciente</td>
                                    <td>Media</td>
                                    <td>Alto</td>
                                    <td><span class="badge bg-danger">ALTO</span></td>
                                    <td>Doble verificación con MedCheck</td>
                                </tr>
                                <tr>
                                    <td>Medicamento incorrecto</td>
                                    <td>Baja</td>
                                    <td>Muy Alto</td>
                                    <td><span class="badge bg-danger">ALTO</span></td>
                                    <td>Escaneo de código de barras + verificación</td>
                                </tr>
                                <tr>
                                    <td>Dosis incorrecta</td>
                                    <td>Media</td>
                                    <td>Alto</td>
                                    <td><span class="badge bg-danger">ALTO</span></td>
                                    <td>Calculadora integrada y alertas automáticas</td>
                                </tr>
                                <tr>
                                    <td>Vía de administración incorrecta</td>
                                    <td>Baja</td>
                                    <td>Alto</td>
                                    <td><span class="badge bg-warning text-dark">MEDIO</span></td>
                                    <td>Checklist obligatorio antes de administración</td>
                                </tr>
                                <tr>
                                    <td>Hora fuera de ventana</td>
                                    <td>Alta</td>
                                    <td>Medio</td>
                                    <td><span class="badge bg-warning text-dark">MEDIO</span></td>
                                    <td>Recordatorios y notificaciones push</td>
                                </tr>
                                <tr>
                                    <td>No verificar alergias</td>
                                    <td>Baja</td>
                                    <td>Muy Alto</td>
                                    <td><span class="badge bg-danger">ALTO</span></td>
                                    <td>Alerta automática al acceder perfil del paciente</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Diagrama de Gantt -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card border-primary">
                <div class="card-header bg-primary text-white">
                    <h5><i class="fas fa-calendar-alt"></i> Diagrama de Gantt - Cronograma del Proyecto</h5>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-bordered table-sm">
                            <thead class="table-primary">
                                <tr>
                                    <th>Fase</th>
                                    <th>M1</th>
                                    <th>M2</th>
                                    <th>M3</th>
                                    <th>M4</th>
                                    <th>M5</th>
                                    <th>M6</th>
                                    <th>M7</th>
                                    <th>M8</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>1. Planificación</strong></td>
                                    <td class="bg-success"></td>
                                    <td class="bg-success"></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <td><strong>2. Desarrollo</strong></td>
                                    <td></td>
                                    <td class="bg-info"></td>
                                    <td class="bg-info"></td>
                                    <td class="bg-info"></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <td><strong>3. Capacitación</strong></td>
                                    <td></td>
                                    <td></td>
                                    <td class="bg-warning"></td>
                                    <td class="bg-warning"></td>
                                    <td class="bg-warning"></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <td><strong>4. Implementación</strong></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td class="bg-primary"></td>
                                    <td class="bg-primary"></td>
                                    <td class="bg-primary"></td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <td><strong>5. Monitoreo</strong></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td class="bg-success"></td>
                                    <td class="bg-success"></td>
                                    <td class="bg-success"></td>
                                </tr>
                                <tr>
                                    <td><strong>6. Documentación</strong></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td class="bg-secondary"></td>
                                    <td class="bg-secondary"></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="mt-3">
                        <h6>Hitos Clave:</h6>
                        <ul>
                            <li><i class="fas fa-flag-checkered text-success"></i> <strong>M1:</strong> Aprobación del proyecto</li>
                            <li><i class="fas fa-flag-checkered text-info"></i> <strong>M3:</strong> Prototipo funcional</li>
                            <li><i class="fas fa-flag-checkered text-warning"></i> <strong>M5:</strong> Finalización de capacitación</li>
                            <li><i class="fas fa-flag-checkered text-primary"></i> <strong>M6:</strong> Inicio de piloto</li>
                            <li><i class="fas fa-flag-checkered text-primary"></i> <strong>M7:</strong> Implementación completa</li>
                            <li><i class="fas fa-flag-checkered text-secondary"></i> <strong>M8:</strong> Evaluación de resultados</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Lista de Cotejo -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card border-success">
                <div class="card-header bg-success text-white">
                    <h5><i class="fas fa-check-double"></i> Lista de Cotejo - Construcción de Indicadores</h5>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-striped table-sm">
                            <thead class="table-success">
                                <tr>
                                    <th>Criterio</th>
                                    <th width="15%" class="text-center">Estado</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>¿Se detecta claramente la necesidad o el objetivo de mejora?</td>
                                    <td class="text-center"><i class="fas fa-check-circle text-success fa-2x"></i></td>
                                </tr>
                                <tr>
                                    <td>¿Se ha conformado el equipo multidisciplinario?</td>
                                    <td class="text-center"><i class="fas fa-check-circle text-success fa-2x"></i></td>
                                </tr>
                                <tr>
                                    <td>¿Se seleccionó un proceso o área específica a evaluar?</td>
                                    <td class="text-center"><i class="fas fa-check-circle text-success fa-2x"></i></td>
                                </tr>
                                <tr>
                                    <td>¿El indicador tiene un nombre claro y definido?</td>
                                    <td class="text-center"><i class="fas fa-check-circle text-success fa-2x"></i></td>
                                </tr>
                                <tr>
                                    <td>¿Se definió operacionalmente (numerador, denominador, unidad)?</td>
                                    <td class="text-center"><i class="fas fa-check-circle text-success fa-2x"></i></td>
                                </tr>
                                <tr>
                                    <td>¿Se identificó la fuente de información?</td>
                                    <td class="text-center"><i class="fas fa-check-circle text-success fa-2x"></i></td>
                                </tr>
                                <tr>
                                    <td>¿Se estableció la frecuencia de medición?</td>
                                    <td class="text-center"><i class="fas fa-check-circle text-success fa-2x"></i></td>
                                </tr>
                                <tr>
                                    <td>¿Cumple con criterios de calidad (relevante, válido, confiable)?</td>
                                    <td class="text-center"><i class="fas fa-check-circle text-success fa-2x"></i></td>
                                </tr>
                                <tr>
                                    <td>¿Se definieron metas o estándares de referencia?</td>
                                    <td class="text-center"><i class="fas fa-check-circle text-success fa-2x"></i></td>
                                </tr>
                                <tr>
                                    <td>¿Se planificó quién, cómo y cuándo se recogerán los datos?</td>
                                    <td class="text-center"><i class="fas fa-check-circle text-success fa-2x"></i></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Metodología SMART -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card border-info">
                <div class="card-header bg-info text-white">
                    <h5><i class="fas fa-lightbulb"></i> Metodología SMART Aplicada</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <h6 class="text-primary">Indicador CLMC (Proceso)</h6>
                            <table class="table table-sm table-bordered">
                                <tr>
                                    <th width="30%" class="bg-light">S - Específico</th>
                                    <td>Mide % de administraciones con checklist completo</td>
                                </tr>
                                <tr>
                                    <th class="bg-light">M - Medible</th>
                                    <td>Numerador y denominador definidos claramente</td>
                                </tr>
                                <tr>
                                    <th class="bg-light">A - Alcanzable</th>
                                    <td>Meta 90% es ambiciosa pero realista</td>
                                </tr>
                                <tr>
                                    <th class="bg-light">R - Relevante</th>
                                    <td>Relacionado con seguridad del paciente</td>
                                </tr>
                                <tr>
                                    <th class="bg-light">T - Temporal</th>
                                    <td>Medición mensual en 8 meses</td>
                                </tr>
                            </table>
                        </div>
                        <div class="col-md-6">
                            <h6 class="text-danger">Indicador TEAEM (Resultado)</h6>
                            <table class="table table-sm table-bordered">
                                <tr>
                                    <th width="30%" class="bg-light">S - Específico</th>
                                    <td>Eventos adversos por incumplimiento de correctos</td>
                                </tr>
                                <tr>
                                    <th class="bg-light">M - Medible</th>
                                    <td>Tasa calculada con datos de farmacovigilancia</td>
                                </tr>
                                <tr>
                                    <th class="bg-light">A - Alcanzable</th>
                                    <td>Meta ≤2% alineada con estándares WHO</td>
                                </tr>
                                <tr>
                                    <th class="bg-light">R - Relevante</th>
                                    <td>Impacto en morbimortalidad y costos</td>
                                </tr>
                                <tr>
                                    <th class="bg-light">T - Temporal</th>
                                    <td>Evaluación mensual con análisis semestral</td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Botón de regreso -->
    <div class="row mb-4">
        <div class="col-12 text-center">
            <a href="/" class="btn btn-primary btn-lg">
                <i class="fas fa-home"></i> Volver al Inicio
            </a>
            <a href="/reports/dashboard" class="btn btn-success btn-lg">
                <i class="fas fa-chart-bar"></i> Ver Dashboard
            </a>
        </div>
    </div>
</div>

<style>
    .card {
        margin-bottom: 20px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .list-group-item h6 {
        font-weight: bold;
        color: #333;
    }
    .table th {
        font-weight: 600;
    }
    code {
        background-color: #f8f9fa;
        padding: 2px 6px;
        border-radius: 3px;
        font-size: 0.9em;
    }
</style>
{% endblock %}
